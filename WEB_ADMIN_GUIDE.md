# 図書館マイページ自動生成システム - Web管理画面 使用ガイド

## 概要

TSVファイルをアップロードするだけで、ユーザーのマイページを自動生成し、ネットワークグラフに統合できるWebアプリケーションを完成させました！

## 起動方法

### 1. サーバー起動（初回セットアップも自動実行）
```bash
# プロジェクトディレクトリに移動
cd library

# 起動スクリプト実行（.venv作成も自動実行）
./start_server.sh
```

**ポータブル設計**: このシステムは`.venv`を使用して完全にポータブルです。
- 自動的に仮想環境を作成・アクティベート
- 依存関係を自動インストール
- どの環境でも同じコマンドで動作

### 2. 手動起動（高度なユーザー向け）
```bash
# 仮想環境をアクティベート
source .venv/bin/activate

# Webサーバー起動
python web_api.py
```

### 2. Web管理画面にアクセス
ブラウザで **http://localhost:8080** を開く

## 📱 Web管理画面の機能

### 🔧 新規ユーザー登録セクション
- **TSVファイルアップロード**: ドラッグ&ドロップ対応
- **ユーザー情報入力**: ID、名前、所属を入力
- **プレビュー機能**: TSVファイルの内容を事前確認
- **リアルタイム処理状況**: 進行状況とログをリアルタイム表示

### 👥 登録ユーザー一覧セクション
- **現在のユーザー表示**: 読書数、専門分野、接続数を表示
- **マイページリンク**: クリックで各ユーザーのページに移動
- **自動更新**: 新規ユーザー追加後に自動更新

## 📋 使用手順

### ステップ1: TSVファイル準備
図書館システムからエクスポートしたファイルを用意（例: `tsv_WQx333yUurmoVMy7TVsmIlKNrdVWAQ.txt`）

### ステップ2: Web管理画面で情報入力
1. TSVファイルをアップロード領域にドラッグ&ドロップ
2. ユーザーID入力（例: `yamada_taro`）
3. ユーザー名入力（例: `山田 太郎`）
4. 所属選択（学部生、大学院生、教授など）
5. オプション: メールアドレス、アバターURL

### ステップ3: 自動生成実行
1. 「マイページ生成開始」ボタンをクリック
2. 処理状況を監視（TSV解析→プロフィール生成→HTML作成→統合）
3. 完了通知を確認

### ステップ4: 結果確認
- 新しいマイページが `src/mypage_[ユーザーID].html` に生成
- ネットワークグラフに新ユーザーが追加
- 他のページでユーザー切り替えが可能

## 生成される成果物

### 1. 個人マイページ
- 自動生成されたプロフィール
- 読書統計（総数、期間、分野分析）
- 読書履歴（カテゴリ別分類）
- 専門分野の自動推定

### 2. システム統合
- `data/users.json` の自動更新
- ネットワークノードとエッジの自動生成
- 専門分野に基づく他ユーザーとの接続作成

## 技術的な特徴

### フロントエンド
- **レスポンシブデザイン**: モバイル対応
- **リアルタイム更新**: WebSocket風のポーリング
- **ドラッグ&ドロップ**: 直感的なファイルアップロード
- **プログレスバー**: 視覚的な進行状況表示

### バックエンド
- **Flask API**: RESTful API設計
- **非同期処理**: バックグラウンドでの重い処理
- **エラーハンドリング**: 詳細なエラーメッセージ
- **ログ機能**: 処理過程の記録

### データフロー
```
TSVファイル → API Server → Python Script → users.json → HTML生成 → UI更新
```

## 🔧 カスタマイズポイント

### 専門分野分類
`scripts/generate_mypage.py` の `category_keywords` を編集

### UIテーマ
`src/admin_dashboard.html` のCSS変数を変更

### 処理ロジック
Pythonスクリプトの分析アルゴリズムを調整

## システムの完成度

**完全自動化**: TSVアップロードから完成まで1クリック  
**リアルタイム監視**: 処理状況をライブで確認  
**エラーハンドリング**: 問題発生時の詳細報告  
**拡張性**: 新機能追加が容易な設計  
**ユーザビリティ**: 直感的で使いやすいインターフェース  

## 次のステップ

1. **本格運用**: 実際のTSVファイルでテスト
2. **機能拡張**: 
   - 書籍カバー画像の自動取得
   - より高度な専門分野分析
   - ユーザー間の推薦機能
3. **デプロイ**: 本番環境での公開

これで、TSVファイルから完全自動でマイページを生成する、プロダクションレディなWebアプリケーションが完成しました！
